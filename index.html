<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Introduction to Web Components</title>

    <!-- HTML Imports -->
    <link rel="import" href="imports.html">
  </head>
  <body>

    <header>
      <h1>Introduction to Web Components</h1>
    </header>

    <main>

      <section>

        <h2>What are web components?</h2>

        <blockquote cite="https://developer.mozilla.org/en-US/docs/Web/Web_Components">
          "...reusable UI widgets created using open Web technology." <cite>-- MDN</cite>
        </blockquote>

        <blockquote cite="https://en.wikipedia.org/wiki/Web_Components">
          "Web Components are a set of features currently being added by the W3C to the HTML and DOM specifications that allow for the creation of reusable widgets or components in web documents and web applications. The intention behind them is to bring component-based software engineering to the World Wide Web. The components model allows for encapsulation and interoperability of individual HTML elements." <cite>-- Wikipedia</cite>
        </blockquote>

        <p>
          Defined in the W3C web specifications, and part of the current web standard.
        </p>

        <p>
          Some browsers now have partial native support. For browsers without support, there are JavaScript libraries which provide support if you want to use web components.
        </p>

        <p>
          Four separate technologies are used together to allow web components (we’ll talk about each in more depth):
        </p>

        <ul>
          <li>Custom Elements</li>
          <li>HTML Templates</li>
          <li>Shadow DOM</li>
          <li>HTML Imports</li>
        </ul>

        <p>Created using HTML, CSS, JS, just like anything else on the front-end</p>

      </section>

      <section>
        <h2>Why use web components?</h2>

        <h3>Web components are:</h3>

        <h4>Portable</h4>
        <p>
          You can build a widget once, and use it anywhere. They can be stored locally or remotely and included using <code>script</code> tags like any JS file, or using HTML imports.
        </p>

        <h4>Reusable</h4>
        <p>
          Web components can be reused with different content, while maintaining the same behavior. Can also be used across multiple projects and shared for use by anyone.
        </p>

        <h4>Modular</h4>
        <p>
          Web components are self-contained and separate from the rest of the DOM. You can use them within your page with a custom HTML tag.
        </p>

        <h4>DRY</h4>
        <p>
          Web components keep your code DRY (Don't Repeat Yourself) by avoiding copy/pasting big chunks of code.
        </p>

      </section>

      <section>

        <h2>What about browser support?</h2>

        <h3>Browser Support</h3>

        <p>
          Note that this is for the latest versions; out-of-date browsers will have less support.
        </p>

        <h4>Chrome/Chromium</h4>
        <p>
          Full, native support.
        </p>

        <h4>Opera</h4>
        <p>
          Full, native support.
        </p>

        <h4>Firefox</h4>
        <p>
          Full support for templates, partial support for others. Must be manually turned on in the browser.
        </p>

        <h4>Safari</h4>

        <p>
          Support for templates, spotty support for the other pieces.
        </p>

        <h4>IE/Edge</h4>

        <p>
          Support for templates, spotty support for the other pieces.
        </p>

        <h3>Verdict</h3>

        <p>
          Support is increasing, but at this point, it is safest to just use polyfills or a component framework if you like using Web Components.
        </p>

      </section>

      <section>
        <h2>Specifications</h2>

        <h3>General changes</h3>

        <p>
          Changes to web standards which enable web components. Changes specific to particular web component technologies are included in discussion of those. This list is according to MDN.
        </p>

        <h4>New and Extended Elements</h4>

        <p>
          (Not to be confused with Custom Elements)
        </p>

        <ul>
          <li>
            <code>&lt;template&gt;</code> and
            <code>&lt;shadow&gt;</code> elements have been added to standard HTML.
          </li>

          <li>
            Extensions of <code>&lt;link&gt;</code> to allow for HTML imports.
          </li>
        </ul>

        <h4>Interface Extensions</h4>

        <ul>
          <li>
            API interfaces for the new and expanded elements <code>HTMLTemplateElement</code>, <code>HTMLShadowElement</code>, and <code>HTMLLinkElement</code>.
          </li>

          <li>
            Extend <code>Event</code> interface as well as <code>Event.path</code> (the path of an event as it "bubbles").
          </li>

          <li>
            Document interface extensions which facilitate web component initialization.
          </li>
        </ul>

      </section>

      <section>

        <h2>Web Component Technologies</h2>

        <h3>Custom Elements</h3>

        <p>
          Pretty self-explanatory. It lets you define and use new HTML tags. You can also extend existing tags to create new ones, and even extend your custom tags.
        </p>

        <h4>Why?</h4>

        <p>
          The idea is to stop the proliferation of <code>div</code>s and improve readability.
        </p>

        <h4>How?</h4>

        <p>
          Uses <code>document.registerElement()</code> to register the new element so it is recognized. The name must include a dash (-).
        </p>

        <a href="custom_element_example.html">Custom Element Example</a>

        <h4>Changes to the Specs</h4>
        <ul>
          <li>
            Added <code>Document.registerElement()</code>, Modified <code>Document.createElement()</code> and <code>Document.createElementNS()</code>
          </li>

          <li>
            “Lifecycle callbacks” can be added to the prototype of a custom element
          </li>

          <li>
            CSS pseudo-class <code>:unresolved</code>, style elements by default
          </li>
        </ul>

        <h3>HTML Imports</h3>

        <p>
          A simple but powerful feature. Import HTML documents into other HTML documents! This feature has been sorely lacking in HTML, so this is an especially interesting one. This allows for greater code modularity and readability.
        </p>

        <h4>Clean Up CSS/JS Dependencies</h4>

        <p>
          The most obvious use is that it allows you to put all CSS <code>link</code> tags and JavaScript <code>script</code> tags into a separate HTML file, which is then loaded into your main HTML file in a single <code>link</code>.
        </p>

        <p>
          It looks something like this:
          <code>
            &lt;link rel="import" href="file/to/import.html"&gt;
          </code>
        </p>

        <h4>Bring in Chunks of Content</h4>

        <p>
          It also allows importing actual HTML markup. You can later add that content to the DOM for display (using JS).
        </p>

        <h4>Tips:</h4>
        <ul>
          <li>
            Don't get carried away loading tons more HTML files than you need to! Balance modularity and performance, and use imports to manage dependencies, not increase them. This shouldn't be an issue under most normal circumstances, but it's just something to watch for.
          </li>

          <li>
            Be careful of CORS (cross-origin resource sharing) errors that may come from trying to load HTML from an outside source. If you run into this locally, it can be helpful to load files from a local development server rather than directly from the filesystem.
          </li>

          <li>
            Linking to markup doesn't actually substitute that tag for the content itself (unlike server-rendered "partials" and similar). You need to use JavaScript to add items to the DOM.
          </li>
        </ul>

        <h3>HTML Templates</h3>

        <p>
          Allows declaring “inert DOM subtrees” in your HTML and “instantiate document fragments with identical contents”.
        </p>

        <h4>The <code>&lt;template&gt;</code> Element</h4>

        <p>
          Can be used on its own, unlike <code>&lt;shadow&gt;</code>.
        </p>

        <p>
          Basically, this lets us define a section of HTML ("DOM subtree") which is not rendered immediately ("inert"), but only when it is referenced by JavaScript code.
        </p>

        <p>
          This allows us to clone that subtree multiple times, and change only the details of the content inside (see example).
        </p>

        <a href="template_example.html">
          Example of <code>&lt;template&gt;</code>
        </a>

        <h3>Shadow DOM</h3>

        <p>
          Sounds sketchy, but it's really not!
        </p>

        <h4>What's it used for?</h4>

        <p>
          Allows you to create isolated scopes for HTML and styles. Creates a boundary between DOM trees, and allows encapsulation of HTML DOM trees.
        </p>

        <h4>The <code>&lt;shadow&gt;</code> Element</h4>

        <p>
          Used only when creating custom web components, not used directly in your HTML document.
        </p>

        <p>
          To see the Shadow DOM in web components as well as standard complex elements like <code>audio</code> and <code>video</code>, turn on 'Show user agent shadow DOM' in the Chrome DevTools.
        </p>

        <h4>Changes to the Specs</h4>
        <ul>
          <li>
            Shadow DOM, <code>ShadowRoot</code> and <code>Element.createShadowRoot()</code>, <code>Element.getDestinationInsertionPoints()</code>, <code>Element.shadowRoot</code>
          </li>

          <li>
            Pseudo-classes <code>:host</code>,
            <code>:host()</code>,
            <code>:host-context()</code>

            <p>
              Selectors related to the Shadow DOM's Shadow Host (the element which "hosts" the shadow DOM).
            </p>
          </li>

          <li>
            Pseudo-element <code>::shadow</code>.

            <p>
              Matches the shadow root itself.
            </p>
          </li>

          <li>Combinator,
            <code>/deep/</code>

            <p>
              Drills down into the shadow DOM, completely ignoring the shadow boundary.
            </p>
          </li>
        </ul>

      </section>

      <section>
        <h2>Libraries</h2>

        <h3>Polyfills</h3>

        <p>Libraries which patch browser support web components</p>

        <h4>webcomponents.js</h4>
        <p>
          A commonly used polyfill which patches missing browser features for you.
        </p>

        <p>
          This (or similar) library is used in the more complex libraries below.
        </p>
        <a href="https://github.com/webcomponents/webcomponentsjs">
          https://github.com/webcomponents/webcomponentsjs
        </a>

        <h3>Frameworks</h3>

        <p>
          Libraries which extend web components and/or make it easier to create them.
        </p>

        <h4>Polymer Project</h4>

        <p>
          A library created by Google which enhances the standard web components and makes it easier to build them.
        </p>

        <p>
          Also includes an extensive catalog of pre-built components.
        </p>

        <h4>X-Tag</h4>

        <p>
          A similar but lighter library backed by Microsoft as well as Mozilla.
        </p>

        <h4>Bosonic</h4>

        <p>
          A toolset to help build Web Components according to the official spec, and patch support for those specs for older browsers.
        </p>

        <h4>SkateJS</h4>

        <p>
          Light, extends the web component specs.
        </p>

        <h3>Pre-built Web Components</h3>

        <h4>Basic Web Components</h4>

        <p>
          An example of an open-source project creating simple web components representing commonly desired widgets.
        </p>

        <h5>Auto-resizing textarea</h5>
        <basic-autosize-textarea minimum-rows="2" placeholder="Type all you want here!">
        </basic-autosize-textarea>

        <p>
          For more, see the demos at <a href="http://basicwebcomponents.org/">Basic Web Components</a> and the code at <a href="https://github.com/basic-web-components/basic-web-components">GitHub</a>.
        </p>
      </section>

      <section>

        <h2>Getting Started Building Web Components</h2>

        <h3>Building a Web Component</h3>

        <p>
          Inspired by SitePoint's tutorial "Creating a Multiselect as a Web Component" by Artem Tabalin
        </p>

        <h4>Files: Multiple approaches</h4>

        <ol>

          <li>
            One HTML file, with everything included.

            <ul>
              <li>Possible due to HTML imports.</li>
              <li>Everything in one place.</li>
              <li>Gets unwieldy as soon as your file gets large.</li>
            </ul>

          </li>

          <li>
            One JavaScript file, with everything included.

            <ul>
              <li>Including JS files tends to work better when using items from a remote server (since it is already used very commonly in things like CDNs).</li>
              <li>Creating an HTML template in a JavaScript string is awkward at best (slightly less so with ES6).</li>
            </ul>

          </li>

          <li>
            Some combination of multiple files.
            <ul>
              <li>Necessary for larger components.</li>
              <li>Closest to the usual best practice for ordinary web pages.</li>
            </ul>
          </li>

        </ol>

        <h4>Planning</h4>

        <p>
          Plan out what you want your component to do. Ask questions.
        </p>

        <ul>
          <li>
            Who will use it on the development side?
          </li>
          <li>
            How general or specific should you make it to get the job done?
          </li>
          <li>
            What should it look like?
          </li>
          <li>
            How will a web app user interact with it?
          </li>
          <li>Etc.</li>
        </ul>

        <h4>Template</h4>

        <p>
          Build your template in an HTML file (or as an ES6 multi-line string).
        </p>

        <p>
          Create a variable in your JS as a handle for your template.
        </p>

        <p>
          This generally will contain any styles you want to be packaged with the web component.
        </p>

        <h4>Custom Element</h4>

        <p>
          Name your custom element something descriptive. If you plan on publishing this publically, it shouldn't conflict with commonly used web components.
        </p>

        <p>
          Register your custom element (this should actually end up at the end of the JS file, but you might as well write it when you create your template).
        </p>

        <p>
          Create a prototype object based on <code>HTMLElement</code> or (preferably) something more specific to your application, which you can extend.
        </p>

        <h4>createdCallback</h4>

        <p>
          Define this on your prototype. It should be a function, and it should contain all the code related to creating and rendering your custom element.
        </p>

        <p>
          Define sub-functions (such as <code>init()</code> and <code>render()</code>) to break up your code into more readable chunks.
        </p>

        <h4>Shadow DOM</h4>

        <p>
          Create the shadow root (shadow DOM).
        </p>

        <p>
          Clone the template, import it as a node, and append it to the shadow DOM!
        </p>

        <h4>Initialize Your Component</h4>

        <p>
          Query to get a handle for relevant parts of your template.
        </p>

        <p>
          Register event listeners to give your component the desired functionality.
        </p>

        <h4>Render That Component!</h4>

        <p>
          Grab content from the custom element and place it in the approriate places in the cloned template.
        </p>

        <h3>Live Demo</h3>

        <x-dropdown>
          <h2>
            Title 1
          </h2>
          <div>
            Body 1
          </div>
        </x-dropdown>

        <x-dropdown>
          <h2>
            Title 2
          </h2>
          <div>
            Body 2
          </div>
        </x-dropdown>
      </section>

      <section>
        <h2>Further Reading</h2>

        <p>
          Websites with good infromation on Web Components
        </p>

        <p>
          Everything on <a href="http://webcomponents.org">webcomponents.org</a>.
        </p>

        <p>
           Articles on Web Components on <a href="http://www.html5rocks.com/en/search?q=web+components">html5rocks.com</a>.
        </p>

        <p>
          <a href="https://developer.mozilla.org/en-US/docs/Web/Web_Components">MDN</a>'s Web Components Page.
        </p>

        <p>
          <a href="https://component.kitchen/tutorial">component.kitchen</a>'s Tutorial.
        </p>

      </section>

    </main>

    <footer>

    </footer>
  </body>
</html>
